
YUI.add('ysf-tout',function(Y){var ToutProto;function Tout(cfg){Tout.superclass.constructor.apply(this,arguments);}
Tout.NAME='tout';Tout.ATTRS={'template':{value:'<div class="Tout-wrap"><div class="Tout" role="alert"><span class="Tout-Icon F-icon Fz-lg"></span><p class="Tout-Msg"><\/p><a class="Tout-Link">href="#"><\/a><\/div></div>'},'msgSelector':{value:'.Tout-Msg'},'iconSelector':{value:'.Tout-Icon'},'linkSelector':{value:'.Tout-Link'},'el':{value:null,setter:function(el,fullname){return Y.one(el);}},'refEl':{value:null},'altY':{value:'0px'},'duration':{value:3},'errorDuration':{value:5}};ToutProto={displayTout:function(msgObj){var msg=msgObj.message,linkObj=msgObj.link,error=msgObj.error;this.setToutMessage(msg);this.setToutIcon(error);if(Y.Lang.isObject(linkObj)){this.setToutLink(linkObj);}else{this.setToutLink(null);}
this.showTout(error);},setToutMessage:function(msg){var el,msgEl;el=this.getToutEl();if(el){msgEl=el.one(this.get('msgSelector'));}
if(msgEl){msgEl.setHTML(msg);}},setToutIcon:function(isError){var iconEl,iconMarkup=isError?'&#xe221;':'&#xe032;';var el=this.getToutEl();if(el){iconEl=el.one(this.get('iconSelector'));}
if(iconEl){iconEl.setHTML(iconMarkup);}},setToutLink:function(linkObj){var el=this.getToutEl(),linkEl,href,text,fn;linkEl=el.one(this.get('linkSelector'));if(!linkObj||!linkObj.text){linkEl.setAttribute('href','#');linkEl.setHTML('');}else{href=linkObj.href||'#';text=linkObj.text;fn=linkObj.fn;linkEl.setAttribute('href',href);linkEl.setHTML(text);linkEl.purge();if(fn){linkEl.once('click',fn);}}},positionTout:function(topValue=null){var tout=this.getToutEl(),ref=this.get('refEl'),refEl,useAltY=false,refRegion,viewportRegion;if(topValue!==null&&topValue.indexOf('px')!==-1){tout.setStyle('top',topValue);return;}
if(ref){refEl=Y.one(ref);}
if(refEl){refRegion=refEl.get('region');viewportRegion=refEl.get('viewportRegion');if(refEl.inRegion(refEl.get('viewportRegion'),true)){tout.setStyle('top',(refRegion.top-viewportRegion.top)+'px');}else{useAltY=true;}}else{useAltY=true;}
if(useAltY){tout.setStyle('top',this.get('altY'));}},showTout:function(isError){var tout=this.getToutEl(),toutDuration=isError?this.get('errorDuration'):this.get('duration');if(isError){tout.addClass('Tout-error');}else{tout.removeClass('Tout-error');}
this.positionTout('-300px');tout.setStyles({'display':'block','opacity':0});tout.transition({duration:0.3,top:'0px',opacity:1},function(){this.transition({duration:0.3,delay:toutDuration,opacity:0,top:'-300px'},function(){this.setStyle('display','none');});});},_createToutEl:function(){var template=this.get('template'),el=null;el=Y.Node.create(template);el.setStyle('display','none');Y.one('body').append(el);this.set('el',el);return el;},getToutEl:function(){var retEl=this.get('el');if(!retEl){retEl=this._createToutEl();}
return retEl;}};Y.extend(Tout,Y.Base,ToutProto);Y.namespace('Fantasy');Y.Fantasy.Tout=Tout;},'0.1',{'requires':['node','base','transition']});