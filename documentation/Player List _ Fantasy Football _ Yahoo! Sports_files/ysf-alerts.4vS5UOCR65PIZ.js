
YUI.add('ysf-alerts',function(Y){if(!Y.Lang.isUndefined(YUI.Fantasy.Alerts)){return;}
var removeComment=function(oAlerts,type){var node=oAlerts.get(type+'Node'),markup=node.get('innerHTML');if(markup.indexOf('<!-- TEMPLATE')<0){return;}
node.set('innerHTML',markup.replace('<!-- TEMPLATE ','').replace('TEMPLATE -->',''));},setMessages=function(type,msgs){if(msgs.length==0){return;}
var oAlerts=this,node=null,newMesg='';removeComment(oAlerts,type);node=oAlerts.get(type+'Node');node.all('div.Message p').remove(true);markup=node.get('innerHTML');Y.each(msgs,function(k,i,v){newMesg+='<p>'+k+'</p>';});node.one('.Message').set('innerHTML',newMesg);node.removeClass('Hidden');node.all('a.Close').removeClass('Hidden');Y.one('#Alert-'+type+'-block').removeClass('Hidden').setAttribute('style','');};var Alerts=Y.Base.create('FantasyAlerts',Y.Base,[],{_handles:{},initializer:function(){var oAlerts=this,warningNode=Y.one('#Alert-warning-block'),confirmNode=Y.one('#Alert-confirmation-block'),criticalNode=Y.one('#Alert-critical-block'),infoNode=Y.one('#Alert-info-block'),containerNode=Y.one('#Alerts');if(Y.one('#Alerts-other')){warningNode=Y.one('#Alert-warning-block-other');confirmNode=Y.one('#Alert-confirm-block-other');criticalNode=Y.one('#Alert-critical-block-other');infoNode=Y.one('#Alert-info-block-other');containerNode=Y.one('#Alerts-other');}
if(containerNode){containerNode.delegate('click',oAlerts.closeAlert,'a.Close');containerNode.all('a.Close').removeClass('Hidden');}
oAlerts.set('warningNode',warningNode);oAlerts.set('confirmationNode',confirmNode);oAlerts.set('criticalNode',criticalNode);oAlerts.set('infoNode',infoNode);},closeAlert:function(e){e.preventDefault();var node=e.currentTarget,parentNode=node.get('parentNode').get('parentNode').get('parentNode'),anim=new Y.Anim({node:parentNode,to:{opacity:0},duration:0.3,easing:Y.Easing.easeOut}),heightAnim=new Y.Anim({node:parentNode,to:{height:0},duration:0.2});anim.on('end',function(){heightAnim.run();},this);heightAnim.on('end',function(){parentNode.addClass('Hidden');},this);anim.run();},show:function(types){this.fire('beforeShow');var oAlerts=this;types=(!Y.Lang.isArray(types))?false:types;Y.each(types,function(k,i,a){oAlerts.get(k+'Node').removeClass('Hidden');});this.fire('afterShow');},destructor:function(){}},{ATTRS:{warnings:{value:[],setter:function(v){var oAlerts=this;return Y.bind(setMessages,oAlerts,'warning',v)();},validator:Y.Lang.isArray},confirmations:{value:[],setter:function(v){var oAlerts=this;return Y.bind(setMessages,oAlerts,'confirmation',v)();},validator:Y.Lang.isArray},criticals:{value:[],setter:function(v){var oAlerts=this;return Y.bind(setMessages,oAlerts,'critical',v)();},validator:Y.Lang.isArray},infos:{value:[],setter:function(v){var oAlerts=this;return Y.bind(setMessages,oAlerts,'info',v)();},validator:Y.Lang.isArray},warningNode:{value:null},confirmationNode:{value:null},criticalNode:{value:null},infoNode:{value:null}}});YUI.Fantasy.Alerts=new Alerts();},'',{requires:['base-build','node-event-delegate','anim-base','anim-easing']});