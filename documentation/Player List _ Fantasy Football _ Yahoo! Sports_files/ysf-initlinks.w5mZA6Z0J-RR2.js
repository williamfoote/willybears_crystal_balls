
YUI.add('ysf-initlinks',function(Y){Y.namespace('Fantasy');Y.Fantasy.InitLinks={init:function(parent){if(!parent){parent=Y.one(document);}else{parent=Y.one(parent);}
var links=parent.all('a'),watchlinks=parent.all('.watch a'),spaceid=Y.Fantasy.rapid.getRapidAttribute('spaceid');links.each(function(curlink){if(curlink.getAttribute('target')){if(!curlink.hasClass('playernote')){curlink.on('click',function(e){Y.Fantasy.InitLinks.launchLink(e);});}}else if(curlink.get('className').indexOf('noaction')!=-1){curlink.on('click',function(e){e.preventDefault();Y.Fantasy.InitLinks.showNoActionPopup(e);});}
var curlinkslk=curlink.getData('slk');if(!curlinkslk){var curlinksclickparams=curlink.getData('clickparams')||curlink.getData('clickParams');if(!curlinksclickparams){return;}
try{var paramsObject=Y.JSON.parse(curlinksclickparams);curlinkslk=paramsObject['slk']?paramsObject['slk']:null;}catch(e){}}
if(spaceid&&curlinkslk){var curlinkhref=curlink.getAttribute('href');var isLocalLink=curlinkhref.indexOf('#')>-1;if(!isLocalLink){curlinkslk=curlinkslk.toLowerCase().replace(/ /g,'-');var queryParams=['pspid='+spaceid,'activity='+curlinkslk].join('&');if(curlinkhref.indexOf('?')>-1){queryParams='&'+queryParams;}else{queryParams='?'+queryParams}
curlink.setAttribute('href',curlinkhref+queryParams);}}});if(watchlinks){this.watchListObj=Y.Fantasy.Watchlist.getInstance();}},launchLink:function(p_oEvent){var oEvent=p_oEvent?p_oEvent:window.event;oEvent=oEvent||{};var keycode=null,width=null,height=null,target=oEvent.currentTarget.getAttribute('target'),top,left;if(target=='sports'){keycode=63;}else if(target.indexOf('details')!=-1){width=400;height=600;var dimensions=target.split('-');if(dimensions[1]){var dimensions2=dimensions[1].split('x');width=dimensions2[0];height=dimensions2[1];target='details';}
keycode=11;}else if(target.indexOf('ranker')!=-1){keycode='0';width=350;height=502;}else if(target=='drafttest'){keycode=10;width=260;height=120;}else if(target.indexOf('scenariogenerator')!=-1){keycode=11;width=960;height=720;}else if(target=='stattrackerpre'){keycode=10;width=551;height=430;}else if(target.indexOf('stattracker')!=-1){keycode=11;width=1180;height=770;}else if(target.indexOf('mlbvideo')!=-1){keycode=11;width=900;height=700;}else if(target.indexOf('nbavideo')!=-1){keycode=11;width=797;height=353;var screenX=(typeof window.screenX==='number')?window.screenX:window.screenLeft;var screenY=(typeof window.screenY==='number')?window.screenY:window.screenTop;if(typeof screenX==='number'&&window.outerWidth){left=((window.outerWidth/2)+screenX)-(width/2);top=((window.outerHeight/2)+screenY)-(height/2);}}else if(target.indexOf('video')!=-1){keycode=11;width=793;height=666;}
if(keycode){if(oEvent.shiftKey||oEvent.ctrlKey||oEvent.metaKey){return true;}
oEvent.preventDefault();var w;if(left&&top){w=Y.Fantasy.InitLinks.yfaPopup(oEvent.currentTarget.getAttribute('href'),target,width,height,keycode,left,top);}else{w=Y.Fantasy.InitLinks.yfaPopup(oEvent.currentTarget.getAttribute('href'),target,width,height,keycode);}
if(w){w.focus();}
return false;}else{return true;}},yfaPopup:function(u,n,w,h,k){var a=[],o=null,r=arguments,sep='';if(w&&h){a[0]='width='+w+',height='+h;sep=',';}
a[1]=sep+'scrollbars='+((k&1)?1:0);a[2]=',resizable='+((k&2)?1:0);a[3]=',toolbar='+((k&4)?1:0);a[4]=',status='+((k&8)?1:0);a[5]=',location='+((k&16)?1:0);a[6]=',menubar='+((k&32)?1:0);if(r.length>=6){a[7]=(document.layers)?',screenX='+r[5]:',left='+r[5];}
if(r.length>=7){a[8]=(document.layers)?',screenY='+r[6]:',top='+r[6];}
a=a.join('');o=open(u,n,a);if(o){o.focus();}
return o;},showNoActionPopup:function(e){var actionStrings=new Array();actionStrings['cc-cantcut']='This player is on the cant cut list and may not be dropped';actionStrings['dd-gameover']='You may not drop this player because the game is over';actionStrings['dd-predraft']='You may not drop this player because the draft for your league has not yet occurred';actionStrings['l-lockedtrades']='You may not perform a trade because the commissioner has locked your trade capabilities';actionStrings['nt-overmaxtrades']='You may not perform a trade becauses you are over your allowed number of trades';actionStrings['dt-gameover']='You may not perform a trade because the game is over';actionStrings['dt-predraft']='You may not perform a trade because the draft for your league has not yet occurred';actionStrings['dt-tradedeadlinepassed']='You may not perform a trade because the trade deadline for your league has passed';actionStrings['l-lockedadds']='You may not add this player because the commissioner has locked your add capabilities';actionStrings['na-overmaxmoves']='You may not add this player because you are over your allowed number of moves';actionStrings['da-gameover']='You may not add this player because the game is over';actionStrings['da-predraft']='You may not add this player because the draft for your league has not yet occurred';actionStrings['da-notinleague']='You may not add this player because you are not in this league';actionStrings['da-waiveroverdue']='You may not submit a waiver claim for this player after the waiver period has ended';actionStrings['w-nil']='You may not watch this player because you are not in this league';actionStrings['dw-notinleague']='You may not watch this player because you are not in this league';actionStrings['dw-leaguearchived']='You may not watch this player because this league is now archived';var container=Y.one('#noactions');var docBody=Y.one(document.body);if(!container){container=Y.Node.create('<div id="noactions" class="popupwrap"></div>');innercontainer=Y.Node.create('<div class="content"></div>');shadow=Y.Node.create('<div class="shadow"></div>');container.append(innercontainer);container.append(shadow);docBody.append(container);}
var action=e.currentTarget.get('className').split('noaction')[1].split(' ')[0];innercontainer.setHTML(actionStrings[action]+'<span>Click anywhere to close<\/span>');var width=container.get('offsetWidth');var pos=e.currentTarget.getXY();var elemLeft=pos[0]-width+7;var elemTop=pos[1]+7+'px';if(elemLeft<0){elemLeft='0';}
container.setStyle('left',elemLeft+'px');container.setStyle('top',elemTop);container.setStyle('visibility','visible');docBody.on('mousedown',Y.Fantasy.InitLinks.hideNoActionPopup);return false;},hideNoActionPopup:function(){var container=document.getElementById('noactions');container.style.left='-9000px';},watchListObj:null};},'',{'requires':['node','event','ysf-watchlist']});