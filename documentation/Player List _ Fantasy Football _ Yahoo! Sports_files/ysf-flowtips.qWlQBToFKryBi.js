
YUI.add('ysf-flowtips',function(Y){function YSFFlowtips(cfg){YSFFlowtips.superclass.constructor.apply(this,arguments);}
YSFFlowtips.Name='ysf-flowtips';YSFFlowtips.ATTRS={'tips':[],'callback':function(){}};Y.extend(YSFFlowtips,Y.Base,{_currentTips:[],_currentEventHandler:null,initializer:function(cfg){this.showTips(0);},showTips:function(i){var tip,self=this;if(!!this.get('tips')[i]){tip=this.get('tips')[i];if(typeof tip.text==='object'){for(var ix=0;ix<tip.text.length;ix++){this.showTip(tip.text[ix],tip.text_sel[ix],tip.has_close,tip.text_location[ix]);}}else{this.showTip(tip.text,tip.text_sel,tip.has_close,tip.text_location);}
this._currentEventHandler=Y.one('body').delegate(tip.next_event,function(){self.closeTips(function(){self.showTips(i+1);});},tip.next_sel);if(tip.abort_sel&&tip.abort_event){Y.one('body').delegate(tip.abort_event,function(){self.closeTips(function(){self.showTips(null);});},tip.abort_sel);}}else{this.get('callback')();}},closeTips:function(cb){for(var tip in this._currentTips){if(this._currentTips.hasOwnProperty(tip)){this._currentTips[tip].hide();this._currentTips[tip].destroy();}}
this._currentTips=[];this._currentEventHandler.detach();cb();},showTip:function(text,sel,showClose,location){location=typeof location!=='undefined'?location:'bottom';var bodyNode=Y.one(document.body),alignment=this._alignmentMap[location],overlay,overlayEl,self=this,selWidth=parseInt(Y.one(sel).get('offsetWidth'),10);if(!Y.one(sel)){return;}
overlay=new Y.Overlay({headerContent:'',bodyContent:text,footerContent:''});if(selWidth>100){overlay.set('width',selWidth+'px');}
overlay.render(bodyNode);overlayEl=overlay.get('contentBox');overlayBd=overlayEl.one('.yui3-widget-bd');overlayBd.addClass(this._contentClass[location]).setStyle('zIndex',99999);overlayEl.one('.yui3-widget-hd').addClass(this._pointerClass[location]).setStyle('zIndex',99999).setStyles(this._pointerStyles[location]);if(showClose){overlayBd.prepend('<span class=" Absolute End M-xs F-icon Fz-xxs Cur-p close">&#xe009;</span>');overlayBd.addClass('Pend-xl');overlayBd.one('.close').on('click',function(){self.closeTips(function(){self.showTips(null);});});}
overlay.set('align',{node:sel,points:alignment});this._currentTips.push(overlay);},_alignmentMap:{'top':[Y.WidgetPositionAlign.BC,Y.WidgetPositionAlign.TC],'bottom':[Y.WidgetPositionAlign.TC,Y.WidgetPositionAlign.BC]},_pointerClass:{'bottom':'Pointer Pointer-top Absolute Top','top':'Pointer Pointer-bottom Absolute Bot'},_pointerStyles:{'bottom':{'left':'45%'},'top':{'left':'45%'}},_contentClass:{'bottom':'Bg Bdr Ta-start Py-lg Px-xxl Mtop-xl Bxsh-1','top':'Bg Bdr Ta-start Py-lg Px-xxl Mbot-xl Bxsh-1'}});Y.namespace('Fantasy');Y.Fantasy.Flowtips=YSFFlowtips;},'1.0',{'requires':['node','event','base','overlay']});