
YUI.add('ysf-tooltip',function(Y){Y.namespace('Fantasy');Y.Fantasy.ToolTip={_isInited:false,init:function(){if(this._isInited){return;}
var waitingToShow=false,tooltipHover=false,newToolTip,tooltip,toolTipEl=Y.one('#tooltip'),onMousemove,onMouseleave;if(!toolTipEl){newToolTip=Y.Node.create('<div id="tooltip" class="Fz-xxs">');Y.one('body').appendChild(newToolTip);tooltip=new Y.Overlay({srcNode:'#tooltip',visible:false,zIndex:300000}).plug(Y.Plugin.WidgetAnim);tooltip.anim.get('animHide').set('duration',0.01);tooltip.anim.get('animShow').set('duration',0.1);tooltip.render();toolTipEl=newToolTip;tooltip.move([100,100]);}
onMousemove=function(e){if(tooltip){if(tooltip.get('visible')===false){toolTipEl.setStyle('opacity','0');tooltip.move([(e.pageX+25),(e.pageY-28)]);}
if(waitingToShow===false){Y.later(500,this,function(){toolTipEl.setStyle('opacity','1');tooltip.show();});waitingToShow=true;if(e.currentTarget.getAttribute('data-tooltip')){tooltip.setStdModContent('body',e.currentTarget.getAttribute('data-tooltip'));}}}};onMouseleave=function(e){Y.later(500,this,function(){if(tooltip&&!tooltipHover){if((e.relatedTarget)&&(e.relatedTarget.hasClass('yui3-widget-bd')===false)){tooltip.hide();waitingToShow=false;}}});};onMouseenterTooltip=function(e){tooltipHover=true;};onMouseleaveTooltip=function(e){tooltipHover=false;};Y.delegate(['mousemove','click'],onMousemove,'body','span.tooltip');Y.delegate(['clickoutside','mouseleave'],onMouseleave,'body','span.tooltip');Y.delegate('mouseenter',onMouseenterTooltip,'body','#tooltip');Y.delegate('mouseleave',onMouseleaveTooltip,'body','#tooltip');toolTipEl.on(['clickoutside','mouseleave'],onMouseleave);this._isInited=true;}};},'0.1',{requires:['node','overlay','event','event-outside','widget-anim']});